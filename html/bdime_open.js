(function(){var M=(new Date()).getTime();function Q(C){return document.getElementById(C)}function B(C){return document.createElement(C)}function J(T,G,C){if(window.attachEvent){T.attachEvent("on"+G,C)}else{if(window.addEventListener){T.addEventListener(G,C,false)}}}function E(T,G,C){if(window.attachEvent){T.detachEvent("on"+G,C)}else{if(window.addEventListener){T.removeEventListener(G,C,false)}}}function K(C){C.style.display="block"}function F(C){C.style.display="none"}function O(G,C){C=C.replace(/\-(\w)/g,function(T,U){return U.toUpperCase()});if(P.isIE){return G.currentStyle[C]}else{return document.defaultView.getComputedStyle(G,null)[C]}}function L(G,C,T){G.style[C]=T}function H(C){return C.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n|\r|\n/g,"<br>").replace(/\s/g,"&nbsp;")}function S(T,X){var Y;if(!X){Y=document}else{Y=X.document}var C=Y.documentElement,G=Y.body;var W=0;var V=0;if(T.getBoundingClientRect){var U=T.getBoundingClientRect();W=U.left+Math.max(C.scrollLeft,G.scrollLeft);V=U.top+Math.max(C.scrollTop,G.scrollTop);W-=C.clientLeft;V-=C.clientTop}else{while(T.offsetParent){W+=T.offsetLeft;V+=T.offsetTop;T=T.offsetParent}}return{x:W,y:V}}function R(G,C,U,W,V){var T=window["BD_PS_C"+(new Date()).getTime()]=new Image();T.src="http://nsclick.baidu.com/v.gif?pid=201&pj=ui_py&time="+G+"&on="+C+"&ch="+U+"&bc="+W+"&pt="+V+"&t="+new Date().getTime()}var A={create:function(){return function(){this.initialize.apply(this,arguments)}}};var N=navigator.userAgent;var P={status:{enable:0,ch:1,bc:1,pt:1,on:1},option:{tRight:50,tBottom:30,panelH:59},domain:"",usr:"",inputs:[],isClose:false,isIE:(/msie (\d+)/i.test(N)&&!window.opera)?parseInt(RegExp.$1):0,isFirefox:/firefox/i.test(N),isOpera:/opera/i.test(N)&&window.opera,isStrict:document.compatMode=="CSS1Compat",shownum:5,curSelectNum:1,iptTargets:[],iptCurTarget:null,inputsource:"",tempsource:"",inputselected:"",isBlur:true,needIptBack:false,selectLock:true,pageT:null,pageTimes:0,isSubAddr:false,cursorHtml:"<span id='bdime_cursor'></span>"};var D=[];D[32]=[" ","\u3000"," "," "," "," "];D[48]=["0","0","\uff10",")","\uff09","\uff09"];D[49]=["1","1","\uff11","!","\uff01","\uff01"];D[50]=["2","2","\uff12","@","\uff20","@"];D[51]=["3","3","\uff13","#","\uff03","#"];D[52]=["4","4","\uff14","$","\uff04","\uffe5"];D[53]=["5","5","\uff15","%","\uff05","\uff05"];D[54]=["6","6","\uff16","^","\uff3e","\u2026\u2026"];D[55]=["7","7","\uff17","&","\uff06","&"];D[56]=["8","8","\uff18","*","\uff0a","*"];D[57]=["9","9","\uff19","(","\uff08","\uff08"];D[65]=["a","\uff41","\uff41","A","\uff21","\uff21"];D[66]=["b","\uff42","\uff42","B","\uff22","\uff22"];D[67]=["c","\uff43","\uff43","C","\uff23","\uff23"];D[68]=["d","\uff44","\uff44","D","\uff24","\uff24"];D[69]=["e","\uff45","\uff45","E","\uff25","\uff25"];D[70]=["f","\uff46","\uff46","F","\uff26","\uff26"];D[71]=["g","\uff47","\uff47","G","\uff27","\uff27"];D[72]=["h","\uff48","\uff48","H","\uff28","\uff28"];D[73]=["i","\uff49","\uff49","I","\uff29","\uff29"];D[74]=["j","\uff4a","\uff4a","J","\uff2a","\uff2a"];D[75]=["k","\uff4b","\uff4b","K","\uff2b","\uff2b"];D[76]=["l","\uff4c","\uff4c","L","\uff2c","\uff2c"];D[77]=["m","\uff4d","\uff4d","M","\uff2d","\uff2d"];D[78]=["n","\uff4e","\uff4e","N","\uff2e","\uff2e"];D[79]=["o","\uff4f","\uff4f","O","\uff2f","\uff2f"];D[80]=["p","\uff50","\uff50","P","\uff30","\uff30"];D[81]=["q","\uff51","\uff51","Q","\uff31","\uff31"];D[82]=["r","\uff52","\uff52","R","\uff32","\uff32"];D[83]=["s","\uff53","\uff53","S","\uff33","\uff33"];D[84]=["t","\uff54","\uff54","T","\uff34","\uff34"];D[85]=["u","\uff55","\uff55","U","\uff35","\uff35"];D[86]=["v","\uff56","\uff56","V","\uff36","\uff36"];D[87]=["w","\uff57","\uff57","W","\uff37","\uff37"];D[88]=["x","\uff58","\uff58","X","\uff38","\uff38"];D[89]=["y","\uff59","\uff59","Y","\uff39","\uff39"];D[90]=["z","\uff5a","\uff5a","Z","\uff3a","\uff3a"];D[96]=["0","0","\uff10",")","\uff09","\uff09"];D[97]=["1","1","\uff11","!","\uff01","\uff01"];D[98]=["2","2","\uff12","@","\uff20","@"];D[99]=["3","3","\uff13","#","\uff03","#"];D[100]=["4","4","\uff14","$","\uff04","\uffe5"];D[101]=["5","5","\uff15","%","\uff05","\uff05"];D[102]=["6","6","\uff16","^","\uff3e","\u2026\u2026"];D[103]=["7","7","\uff17","&","\uff06","&"];D[104]=["8","8","\uff18","*","\uff0a","*"];D[105]=["9","9","\uff19","(","\uff08","\uff08"];D[106]=["*","\uff0a","*","*","\uff0a","*"];D[107]=["+","\uff0b","+","+","\uff0b","+"];D[109]=["-","\uff0d","-","-","\uff0d","-"];D[110]=[".","\uff0e",".",".","\uff0e","."];D[111]=["/","\uff0f","/","/","\uff0f","/"];D[186]=[";","\uff1b","\uff1b",":","\uff1a","\uff1a"];D[187]=["=","\uff1d","=","+","\uff0b","+"];D[188]=[",","\uff0c","\uff0c","<","\uff1c","\u300a"];D[189]=["-","\uff0d","-","_","\uff3f","\u2014\u2014"];D[190]=[".","\uff0e","\u3002",">","\uff1e","\u300b"];D[191]=["/","\uff0f","\u3001","?","\uff1f","\uff1f"];D[192]=["`","\uff40","\u00b7","~","\uff5e","\uff5e"];D[219]=["[","\uff3b","\u3010","{","\uff5b","{"];D[220]=["\\","\uff3c","\u3001","|","\uff5c","|"];D[221]=["]","\uff3d","\u3011","}","\uff5d","}"];D[222]=["'","\uff07","\u2018","\u2019",'"',"\uff02","\u201c","\u201d"];P.build=(function(){function T(Y){if(P.isIE){var Z=document.createStyleSheet();Z.cssText=Y}else{var X=B("style");X.type="text/css";X.appendChild(document.createTextNode(Y));document.getElementsByTagName("HEAD")[0].appendChild(X)}if(P.isIE==6){W()}}function W(){var Y=" url(about:blank) fixed";var X=document.documentElement,Z=document.body;if(X.currentStyle.backgroundImage=="none"){X.style.background=X.currentStyle.backgroundColor+Y}else{if(Z.currentStyle.backgroundImage=="none"){Z.style.background=Z.currentStyle.backgroundColor+Y}}}function C(){var X=[];X.push("#bdime_tools{height:26px;font-size:12px;color:#000;position:absolute;z-index:99999;-moz-user-select:none;display:none}");X.push("#bdime_tools_on{width:140px;height:26px;background:url(http://www.baidu.com/olime/ime_bg.gif);position:absolute;right:0}");X.push("#bdime_tools_on span{width:23px;height:26px;display:inline-block;background:url(http://www.baidu.com/olime/ime_bg.gif);cursor:pointer}");X.push("span#bdime_tools_drag{width:36px;background:none;cursor:move}");X.push("#bdime_tools_on .close_default{width:35px;background:none}");X.push("#bdime_tools_on .close_hover{width:35px;background-position:-105px -27px}");X.push("#bdime_tools_on .ch_a_default{background-position:-36px 0}");X.push("#bdime_tools_on .ch_a_hover{background-position:-36px -27px}");X.push("#bdime_tools_on .ch_b_default{background-position:-36px -54px}");X.push("#bdime_tools_on .ch_b_hover{background-position:-36px -81px}");X.push("#bdime_tools_on .bc_a_default{background-position:-59px 0}");X.push("#bdime_tools_on .bc_a_hover{background-position:-59px -27px}");X.push("#bdime_tools_on .bc_b_default{background-position:-59px -54px}");X.push("#bdime_tools_on .bc_b_hover{background-position:-59px -81px}");X.push("#bdime_tools_on .pt_a_default{background-position:-81px 0}");X.push("#bdime_tools_on .pt_a_hover{background-position:-81px -27px}");X.push("#bdime_tools_on .pt_b_default{background-position:-81px -54px}");X.push("#bdime_tools_on .pt_b_hover{background-position:-81px -81px}");X.push("#bdime_tools_off{width:38px;height:26px;display:none;position:absolute;right:0}");X.push("#bdime_tools_off span{width:29px;height:26px;display:inline-block;background:url(http://www.baidu.com/olime/ime_bg.gif) 0 -108px;cursor:pointer}");X.push("#bdime_tools_off .off_logo_default{background-position:-52px -108px}");X.push("#bdime_tools_off .off_logo_hover{background-position:-9px -108px}");X.push("span#bdime_tools_off_drag{width:9px;cursor:move}");X.push("#bdime_panel{position:absolute;z-index:99999;display:none}");X.push("#bdime_panel table{width:350px;border:0}");X.push("#bdime_panel td{font:14px arial;color:#000;height:59px;text-align:left;vertical-align:top;white-space:nowrap;-moz-user-select:none}");X.push(".panel_l{width:14px;background:url(http://www.baidu.com/olime/ime_bg.gif) no-repeat 0 -135px}");X.push(".panel_c{background:url(http://www.baidu.com/olime/ime_bg.gif) repeat-x 0 -195px}");X.push(".panel_r{width:38px;background:url(http://www.baidu.com/olime/ime_bg.gif) no-repeat right -135px}");X.push(".panel_m{height:24px;cursor:move}");X.push(".panel_l div{width:14px}");X.push(".panel_r div{width:38px}");X.push(".panel_c a{font-size:12px;color:#366F9B;position:absolute;right:38px;top:7px}");X.push("#bdime_cursor{width:1px;height:16px;background:#EB4F04;overflow:hidden}");X.push("#bdime_input_holder{font:bold 16px/24px arial;color:#369;padding-right:40px}");X.push("#bdime_input span{display:inline-block}");X.push("#bdime_selector{font:16px 'simsun';padding-top:8px;cursor:default}");X.push("#bdime_selector span{cursor:pointer}");X.push(".bdime_selected{color:#eb4f03}");X.push(".bdime_page{width:9px;height:9px;overflow:hidden;position:absolute;top:38px;background:url(http://www.baidu.com/olime/ime_bg.gif)}");X.push(".bdime_sel_pre_on{right:27px;background-position:-85px -110px;cursor:pointer}");X.push(".bdime_sel_pre_off{right:27px;background-position:-104px -173px}");X.push(".bdime_sel_nxt_on{right:12px;background-position:-96px -110px;cursor:pointer}");X.push(".bdime_sel_nxt_off{right:12px;background-position:-119px -173px}");X.push("#bdime_msg_off{width:125px;left:60px;top:-50px}");X.push("#bdime_msg_off p{text-align:left}");X.push("#bdime_msg_on{width:118px;right:-40px;top:-32px}");X.push("#bdime_msg_ch{width:120px;right:32px;top:-32px}");X.push("#bdime_msg_bc{width:150px;right:-10px;top:-32px}");X.push("#bdime_msg_pt{width:135px;right:-28px;top:-32px}");X.push(".bdime_msg{font:12px arial;position:absolute;z-index:99999;display:none}");X.push(".bdime_msg p{border:1px solid #a1c2f2;background:#dbe9f9;margin:0;padding:3px 6px;line-height:18px;text-align:center}");X.push(".bdime_msg div{height:7px;overflow:hidden;background:url(http://www.baidu.com/olime/ime_bg.gif) center -256px;position:relative;top:-1px}");X.push(".bdime_msg b{width:2px;height:2px;float:left;overflow:hidden;background:url(http://www.baidu.com/olime/ime_bg.gif) -85px -121px}");X.push(".bdime_msg .r1{_margin-right:-2px}");X.push(".bdime_msg .r2{float:right;background-position:-87px -121px}");X.push(".bdime_msg .r3{background-position:-85px -123px;margin-top:-2px}");X.push(".bdime_msg .r4{float:right;background-position:-87px -123px;margin-top:-2px}");X.push("#bdime_menu{width:105px;height:54px;margin:0;padding:7px 0 0;list-style:none;position:absolute;z-index:99999;left:0;top:-61px;background:url(http://www.baidu.com/olime/ime_bg.gif) no-repeat 0 -265px;display:none}");X.push("#bdime_menu li a{width:101px;height:25px;line-height:25px;color:#000;display:block;text-decoration:none;text-align:left;text-indent:20px;margin:0 auto}");X.push("#bdime_menu li a:hover{color:#fff;background:#457cd8}");T(X.join(""))}function V(){var Z=Q("bdime_tools")?Q("bdime_tools"):B("DIV");Z.id="bdime_tools";var Y='<div id="bdime_tools_off"><div><div id="bdime_msg_on" class="bdime_msg"><b class="r1"></b><b class="r2"></b><p>\u5f00\u542f\u5728\u7ebf\u8f93\u5165\u6cd5</p><b class="r3"></b><b class="r4"></b><div></div></div></div><span id="bdime_tools_off_drag"></span><span id="bdime_tools_off_logo" class="off_logo_default"></span></div><div id="bdime_tools_on"><div><ul id="bdime_menu"><li><a href="http://tieba.baidu.com/f?kw=%E7%99%BE%E5%BA%A6%E5%9C%A8%E7%BA%BF%E8%BE%93%E5%85%A5%E6%B3%95&ie=utf-8" class="bdime_link" target="_blank">\u53cd\u9988\u5efa\u8bae</a></li><li><a href="http://www.baidu.com/search/ime/help.html#n2" class="bdime_link" target="_blank">\u5e2e\u52a9</a></li></ul><div id="bdime_msg_ch" class="bdime_msg"><b class="r1"></b><b class="r2"></b><p>\u5207\u6362\u4e2d/\u82f1\u6587(Shift)</p><b class="r3"></b><b class="r4"></b><div></div></div><div id="bdime_msg_bc" class="bdime_msg"><b class="r1"></b><b class="r2"></b><p>\u5168/\u534a\u89d2(Shift + Space)</p><b class="r3"></b><b class="r4"></b><div></div></div><div id="bdime_msg_pt" class="bdime_msg"><b class="r1"></b><b class="r2"></b><p>\u4e2d/\u82f1\u6587\u6807\u70b9(Ctrl + .)</p><b class="r3"></b><b class="r4"></b><div></div></div><div id="bdime_msg_off" class="bdime_msg"><b class="r1"></b><b class="r2"></b><p>\u70b9\u51fb\u201c\u5173\u95ed\u201d\uff0c\u5728\u7ebf\u8f93\u5165\u6cd5\u6682\u505c\u4f7f\u7528\u3002</p><b class="r3"></b><b class="r4"></b><div></div></div></div><span id="bdime_tools_drag"></span><span id="bdime_tools_ch" class="ch_a_default"></span><span id="bdime_tools_bc" class="bc_b_default"></span><span id="bdime_tools_pt" class="pt_a_default"></span><span id="bdime_tools_close" class="close_default"></span></div>';Z.innerHTML=Y;document.body.appendChild(Z);var X=Q("bdime_panel")?Q("bdime_panel"):B("DIV");X.id="bdime_panel";var Y='<table cellpadding="0" cellspacing="0" onselectstart="return false;"><tr><td class="panel_l"><div class="panel_m"></div></td><td class="panel_c"><a href="http://tieba.baidu.com/f?kw=%E7%99%BE%E5%BA%A6%E5%9C%A8%E7%BA%BF%E8%BE%93%E5%85%A5%E6%B3%95&ie=utf-8" target="_blank">\u53cd\u9988</a><div id="bdime_input_holder" class="panel_m"><span id="bdime_input"></span></div><div id="bdime_selector"></div></td><td class="panel_r"><div class="panel_m"></div><span id="bdime_sel_pre" class="bdime_page bdime_sel_pre_off"></span><span id="bdime_sel_nxt" class="bdime_page bdime_sel_nxt_off"></span></td></tr></table>';X.innerHTML=Y;document.body.appendChild(X);Q("bdime_input").innerHTML=P.cursorHtml}function G(){var a=Q("bdime_tools");var c=a.getElementsByTagName("*");var X=Q("bdime_panel");var Y=X.getElementsByTagName("*");a.setAttribute("unselectable","on");X.setAttribute("unselectable","on");for(var Z=0;Z<c.length;Z++){c[Z].setAttribute("unselectable","on")}for(var Z=0;Z<Y.length;Z++){Y[Z].setAttribute("unselectable","on")}}function U(){P.tools=Q("bdime_tools");P.tools_on=Q("bdime_tools_on");P.tools_drag=Q("bdime_tools_drag");P.tools_ch=Q("bdime_tools_ch");P.tools_bc=Q("bdime_tools_bc");P.tools_pt=Q("bdime_tools_pt");P.tools_close=Q("bdime_tools_close");P.tools_off=Q("bdime_tools_off");P.tools_off_drag=Q("bdime_tools_off_drag");P.tools_off_logo=Q("bdime_tools_off_logo");P.panel=Q("bdime_panel");P.panel_pre=Q("bdime_sel_pre");P.panel_nxt=Q("bdime_sel_nxt");P.panel_input=Q("bdime_input");P.panel_selector=Q("bdime_selector");P.bdime_msg_on=Q("bdime_msg_on");P.bdime_msg_ch=Q("bdime_msg_ch");P.bdime_msg_bc=Q("bdime_msg_bc");P.bdime_msg_pt=Q("bdime_msg_pt");P.bdime_msg_off=Q("bdime_msg_off");P.bdime_menu=Q("bdime_menu")}C();V();G();return{init:U}})();P.toolbar=(function(){var V=false;function d(){var l=P.tools;var g=document.documentElement,i=document.body;var h=P.isStrict?g.clientHeight:i.clientHeight;var m=P.isStrict?g.clientWidth:i.clientWidth;var k=m-l.offsetWidth-P.option.tRight;var j=h-l.offsetHeight-P.option.tBottom;if(P.isIE==6){l.style.position="absolute";l.style.setExpression("left","eval((document.documentElement.scrollLeft || document.body.scrollLeft) + "+k+") + 'px'");l.style.setExpression("top","eval((document.documentElement.scrollTop || document.body.scrollTop) + "+j+") + 'px'")}else{l.style.position="fixed";l.style.left=k+"px";l.style.top=j+"px"}}function Z(){setTimeout(function(){var g=P.tools;if(g.style.display!="block"){K(g)}d();F(g)},10)}function X(){if(P.domain&&navigator.cookieEnabled&&/\bbdime=(\d+)(;|$)/i.test(document.cookie)){var g=RegExp.$1;P.status.enable=parseInt(g.substr(0,1));if(g.length==5){P.status.ch=parseInt(g.substr(1,1));P.status.bc=parseInt(g.substr(2,1));P.status.pt=parseInt(g.substr(3,1));P.status.on=parseInt(g.substr(4,1))}}c()}function c(){var h=P.toolbar;var g=P.tools_ch;if(P.status.ch){h.setModeOn(g)}else{h.setModeOff(g)}var j=P.tools_bc;if(P.status.bc){h.setModeOn(j)}else{h.setModeOff(j)}var i=P.tools_pt;if(P.status.pt){h.setModeOn(i)}else{h.setModeOff(i)}}function e(){K(P.tools);P.toolbar.isShow=true}function Y(){if(P.isBlur){F(P.tools);P.inputpanel.hide();P.toolbar.isShow=false}}function G(){setTimeout(function(){K(P.tools_on);F(P.tools_off);K(P.bdime_msg_off);F(P.bdime_msg_off)},10)}function a(){K(P.bdime_msg_on);F(P.bdime_msg_on);F(P.bdime_menu);F(P.tools_on);K(P.tools_off)}function W(g){g.className=g.className.replace(/_default/,"_hover")}function U(g){g.className=g.className.replace(/_hover/,"_default")}function T(g){g.className=g.className.replace(/_b_/,"_a_")}function C(g){g.className=g.className.replace(/_a_/,"_b_")}function f(){Z();X();J(window,"scroll",d);var k=P.tools_off_logo;J(k,"mouseover",function(){W(k);K(P.bdime_msg_on)});J(k,"mouseout",function(){U(k);F(P.bdime_msg_on)});J(k,"click",function(){K(P.bdime_msg_off)});var j=P.tools_close;J(j,"mouseover",function(){W(j);K(P.bdime_msg_off)});J(j,"mouseout",function(){U(j);F(P.bdime_msg_off)});J(j,"click",function(){W(k);K(P.bdime_msg_on);F(P.bdime_menu)});var g=P.tools_ch;J(g,"mouseover",function(){W(g);K(P.bdime_msg_ch)});J(g,"mouseout",function(){U(g);F(P.bdime_msg_ch)});var i=P.tools_bc;J(i,"mouseover",function(){W(i);K(P.bdime_msg_bc)});J(i,"mouseout",function(){U(i);F(P.bdime_msg_bc)});var h=P.tools_pt;J(h,"mouseover",function(){W(h);K(P.bdime_msg_pt)});J(h,"mouseout",function(){U(h);F(P.bdime_msg_pt)});J(P.tools_on,"contextmenu",function(m){var l=m.target||m.srcElement;if(l.id!="bdime_tools_close"){K(P.bdime_menu)}window.event?m.returnValue=false:m.preventDefault()})}return{show:e,hide:Y,toolsOnShow:G,toolsOnHide:a,setModeOn:T,setModeOff:C,setPosition:d,resetStatus:c,isShow:V,init:f}})();P.inputpanel=(function(){var j=false;function e(){var k=Q("bdime_temp");if(k){document.body.removeChild(k)}}function Y(l){e();var r=l.ownerDocument.defaultView;var p=S(l,r);var m=B("div");m.id="bdime_temp";m.style.width=l.clientWidth-1+"px";m.style.height=l.clientHeight+"px";m.style.visibility="hidden";m.style.position="absolute";m.style.wordWrap="break-word";m.style.textAlign="left";m.style.left=p.x+"px";m.style.top=p.y+"px";document.body.appendChild(m);var n=l.value;var o=n.substring(0,l.selectionStart);m.innerHTML=H(o);var q=Q("bdime_cursor_temp");if(q){m.removeChild(q)}else{q=B("span");q.id="bdime_cursor_temp";q.innerHTML="&nbsp;";m.appendChild(q)}var t=["font","fontFamily","fontSize","fontWeight","fontVariant","fontStyle","letterSpacing","wordSpacing","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","overflowX","overflowY"];for(var k=0;k<t.length;k++){var s=O(l,t[k]);if(s){L(m,t[k],s)}}return q}function h(m){var k=0,o=0;var l=m.ownerDocument.selection.createRange();if(m.tp=="text"){var n=S(m);k=n.x+l.offsetLeft+10;o=l.boundingTop+l.boundingHeight}else{var n=S(m);k=l.offsetLeft+10;o=l.offsetTop+10}return{x:k,y:o}}function d(l){var k;if(P.isIE){k=l.ownerDocument.parentWindow}else{k=l.ownerDocument.defaultView}return k}function V(p){var m=0,r=0;var l=U(p);var o=d(p);var q=S(p,o);m+=q.x;r+=q.y;var k=o.document.documentElement;var n=o.document.body;m-=k.scrollLeft||n.scrollLeft;r-=k.scrollTop||n.scrollTop;return{x:m,y:r}}function U(k){if(document.documentMode==9){b=k.ownerDocument.body.innerHTML!=window.document.body.innerHTML}else{b=k.ownerDocument!=window.document}return b}function X(p){var m=0,r=0;var q;var l=U(p);while(l){var o=d(p);q=S(p,o);p=o.frameElement;m+=q.x;r+=q.y;var k=o.document.documentElement;var n=o.document.body;m-=k.scrollLeft||n.scrollLeft;r-=k.scrollTop||n.scrollTop;l=U(p)}q=S(p);m+=q.x;r+=q.y;return{x:m,y:r}}function Z(k){return{x:X(k).x-V(k).x,y:X(k).y-V(k).y}}function C(k){return{x:k.document.documentElement.scrollLeft||k.document.body.scrollLeft,y:k.document.documentElement.scrollTop||k.document.body.scrollTop}}function T(){var AD=P.iptCurTarget;if(!(AD||j)){return }var l=0,t=0;var o;if(AD.tp=="textarea"){var k=Z(AD);if(P.isIE){o=h(AD);if(document.documentMode>=8){l=o.x}else{l=k.x+o.x}t=k.y+o.y+5}else{var r=Y(AD);var x=C(AD.ownerDocument.defaultView);var u=r.offsetHeight;o=S(r);l=k.x+o.x-x.x-AD.scrollLeft+10;t=k.y+o.y-x.y+u-AD.scrollTop}}else{if(AD.tp=="iframe"||AD.tp=="div"){var AA=20,y=40;if(AD.tp=="div"){AA=10;y=20}var k=Z(AD);if(P.isIE){var n=AD.ownerDocument.parentWindow;var x=C(n);var q="<span id='bdime_cursor_temp'>&nbsp;</span>";if(AD.contentWindow){var AE=AD.contentWindow.document}else{var AE=AD.ownerDocument}var s=AE.selection.createRange();s.collapse();s.pasteHTML(q);s=null;var AB;if(AD.tp=="iframe"){AB=AD.contentWindow.document}else{AB=AD.ownerDocument}var v=AB.getElementById("bdime_cursor_temp");o=S(v,n);v.parentNode.removeChild(v);v=null}else{var n=AD.ownerDocument.defaultView;var x=C(n);var p;if(AD.tp=="iframe"){p=AD.contentWindow}else{p=n}var v=p.document.createElement("span");var s=p.getSelection().getRangeAt(0);v.id="bdime_cursor_temp";try{s.insertNode(v);o=S(v,p);v.parentNode.removeChild(v)}catch(z){o=X(AD)}s=null;v=null}if(AD.tp=="iframe"){var p=AD.contentWindow;if(!U(AD)){l=X(AD).x+o.x+10;t=X(AD).y+o.y+10;if(P.isIE){t-=C(window).y}}else{l=k.x+o.x-C(p).x-x.x+AA;t=k.y+o.y-C(p).y-x.y+y}if(P.isIE){t+=10}}else{l=k.x+o.x-x.x+AA;t=k.y+o.y-x.y+y}}else{var o=X(AD);l=o.x+20;t=o.y+AD.offsetHeight}}var AC=document.body.offsetHeight;var m=AD.offsetHeight;if(AC>t&&t+P.option.panelH>AC){t=t-P.option.panelH-m}P.panel.style.left=l+"px";P.panel.style.top=t+"px"}function c(){if(typeof (bdsug)!="undefined"&&bdsug.sugkeywatcher){return true}return false}function i(){K(P.panel);P.inputpanel.isShow=true;T(P.iptCurTarget);if(c()){bdsug.sugkeywatcher.off()}}function f(){F(P.panel);P.inputpanel.isShow=false;e();P.inputsource="";P.inputselected="";P.pageTimes=0;P.isSubAddr=false;P.panel_input.innerHTML=P.cursorHtml;P.panel_selector.innerHTML="";P.curSelectNum=1;P.data.resetGroup();if(c()){bdsug.sugkeywatcher.on()}}function a(){if(!P.data.db.data){return false}W();G();g();if(P.needIptBack){P.control.setInput()}E(document,"mouseup",P.control.stopAutoPage);J(document,"mouseup",P.control.stopAutoPage)}function W(){var m="";var o=(P.data.db.curpage-1)*P.shownum;var n=o+P.shownum;if(n>P.data.db.totalnum){n=P.data.db.totalnum}for(var l=o;l<n;l++){var k=l-o+1;m+="<span id='bdime_selector_"+k+"'";if(k==1){m+=" class='bdime_selected'"}m+=" onclick='bdime.control.clkSelResult(this)' sn='"+P.data.db.data[l][1]+"' unselectable='on'>"+k+"."+P.data.db.data[l][0]+"</span>&nbsp;&nbsp;"}P.panel_selector.innerHTML=m;P.selectLock=false}function G(){var k=P.panel_pre;if(P.data.db.curpage>1){k.className="bdime_page bdime_sel_pre_on";E(k,"mousedown",P.control.autoPagePre);J(k,"mousedown",P.control.autoPagePre)}else{k.className="bdime_page bdime_sel_pre_off";E(k,"mousedown",P.control.autoPagePre)}}function g(){var k=P.panel_nxt;if(P.data.db.totalpage>1&&P.data.db.curpage<P.data.db.totalpage){k.className="bdime_page bdime_sel_nxt_on";E(k,"mousedown",P.control.autoPageNxt);J(k,"mousedown",P.control.autoPageNxt)}else{k.className="bdime_page bdime_sel_nxt_off";E(k,"mousedown",P.control.autoPageNxt)}}return{setPosition:T,isShow:j,show:i,hide:f,setResults:a}})();P.control=(function(){function h(){if(!P.domain){return }if(navigator.cookieEnabled){var AA=new Date();AA.setTime(AA.getTime()+365*24*3600*1000);var z=P.status.enable+""+P.status.ch+""+P.status.bc+""+P.status.pt+""+P.status.on;document.cookie="bdime="+z+";domain="+P.domain+";path=/;expires="+AA.toGMTString()}}function s(z){P.status.on=1;P.toolbar.toolsOnShow();P.keywatcher.on();P.inputwatcher.on();if(z){T(null,true);h()}}function a(z){P.status.on=0;P.toolbar.toolsOnHide();P.inputpanel.hide();P.keywatcher.off();P.inputwatcher.off();Y(null,true);if(z){h()}}function i(){if(P.iptCurTarget){P.isClose=false;P.status.enable=2;P.status.ch=1;P.status.bc=1;P.status.pt=1;P.toolbar.resetStatus();s(1)}}function c(){if(P.iptCurTarget){P.status.enable=0;a(1);P.isClose=true;P.toolbar.hide()}}function q(z){if(z&&(z.tp=="input"||z.tp=="textarea")){return true}return false}function Y(AD,AA){var z=[];if(AA){z=P.iptTargets}else{z.push(AD)}for(var AB=0;AB<z.length;AB++){var AC=z[AB];if(AC.tp=="input"||AC.tp=="textarea"){if(AC==P.iptCurTarget){AC.blur()}AC.style.imeMode="auto";if(typeof (bdsug)!="undefined"&&bdsug.sug){AC.setAttribute("autocomplete","off")}else{AC.setAttribute("autocomplete","on")}if(AC==P.iptCurTarget){AC.focus()}}}}function T(AE,AA){var z=[];if(AA){z=P.iptTargets}else{z.push(AE)}for(var AC=0;AC<z.length;AC++){var AD=z[AC];if(AD.tp=="input"||AD.tp=="textarea"){var AB=false;if(AD==document.activeElement){AB=true}if(AB){AD.blur()}AD.style.imeMode="disabled";AD.setAttribute("autocomplete","off");if(AB){AD.focus()}}}}function u(){var AA=P.tools_ch;var z=P.tools_pt;P.control.enterInput();if(P.status.ch){P.status.ch=0;P.status.pt=0;P.toolbar.setModeOff(AA);P.toolbar.setModeOff(z);P.inputpanel.hide()}else{P.status.ch=1;P.status.pt=1;P.toolbar.setModeOn(AA);P.toolbar.setModeOn(z)}h()}function k(){var z=P.tools_bc;if(P.status.bc){P.status.bc=0;P.toolbar.setModeOff(z)}else{P.status.bc=1;P.toolbar.setModeOn(z)}h()}function G(){var z=P.tools_pt;if(P.status.pt){P.status.pt=0;P.toolbar.setModeOff(z)}else{P.status.pt=1;P.toolbar.setModeOn(z)}h()}function g(){X();P.pageT=setInterval(X,300)}function X(){P.data.db.curpage--;if(P.data.db.curpage<1){P.data.db.curpage=1;clearInterval(P.pageT)}P.needIptBack=false;P.inputpanel.setResults()}function V(){n();P.pageT=setInterval(n,300)}function n(){P.data.db.curpage++;var AA=P.data.db.curpage;var z=P.data.db.totalpage;if(AA>=z){P.data.db.curpage=z;clearInterval(P.pageT)}if(P.data.db.enableGetData&&AA==z-1){P.data.param.rn+=P.data.param.pn;P.tempsource="";P.xpc.send();P.needIptBack=false}else{P.needIptBack=false;P.inputpanel.setResults()}}function m(){clearInterval(P.pageT)}function W(AC){var AA="";var AB=P.inputselected;for(var z=0;z<AB.length;z++){AA+="<span class='bdime_ch'>"+AB.charAt(z)+"</span>"}for(var z=0;z<AC.length;z++){AA+="<span class='bdime_en'>"+AC.charAt(z)+"</span>"}AA+=P.cursorHtml;return AA}function f(z){return z.replace(/<\/?[^>]+>/gi,"")}function p(){var AA=P.panel_selector.getElementsByTagName("span");for(var z=0;z<AA.length;z++){AA[z].className=""}}function r(z,AF){if(AF){P.inputpanel.hide()}if(/^\w+\'+/.test(P.inputsource)){z=z.replace(/\'/g,"");z=t(z)}var AD=P.iptCurTarget;if(AD.tp=="iframe"){var AG=AD.contentWindow.document;if(P.isIE){AD.contentWindow.focus();var AB=AG.selection.createRange();if(AF){AB.pasteHTML(z);AB.collapse()}else{AB.select()}}else{AD.contentWindow.focus();if(AF){AG.execCommand("insertHTML",false,z)}}}else{if(AD.tp=="div"&&!P.isIE){var AG=AD.ownerDocument;if(z!=""){AG.execCommand("insertHTML",false,z)}}if(document.selection&&!P.isOpera){AD.focus();var AG=AD.ownerDocument;var AB=AG.selection.createRange();if(AF){AB.text=z;AB.collapse()}AB.select()}else{if(AD.selectionStart||AD.selectionStart>-1){AD.focus();var AE=AD.selectionStart;var AA=AD.selectionEnd;if(AF){var AI=AD.value;AD.value=AI.substring(0,AE)+z+AI.substring(AA,AI.length);AD.selectionStart=AE+z.length;AD.selectionEnd=AE+z.length}try{var AH=document.createEvent("KeyboardEvent");AH.initKeyEvent("keypress",true,true,null,false,false,false,false,0,32);AD.dispatchEvent(AH);AH=document.createEvent("KeyboardEvent");AH.initKeyEvent("keypress",true,true,null,false,false,false,false,8,0);AD.dispatchEvent(AH)}catch(AC){}}else{AD.focus();AD.value+=z}}}}function t(z){return z.replace(/^\d\./,"")}function w(){if(P.needIptBack){setTimeout(function(){var z=P.data.db.inputback;if(z!=""){P.data.db.inputback=""}P.panel_input.innerHTML=W(z)},5)}else{P.panel_input.innerHTML=W(P.inputsource)}}function x(AC){P.pageTimes=0;P.isSubAddr=false;if(P.selectLock){return }P.selectLock=true;var z=AC.getAttribute("sn");var AE="";if(z>0){AE=f(AC.innerHTML);AE=t(AE);P.inputselected+=AE}var AB=P.inputsource.replace(/\'/g,"");P.data.group.count++;if(z<AB.length){var AG=AB.substr(0,z);P.data.group.en.push(AG);P.data.group.ch.push(AE);var AA=AB.substr(z,AB.length-1);P.inputsource=AA;P.data.restData();P.needIptBack=true}else{P.data.group.en.push(P.inputsource);P.data.group.ch.push(AE);if(P.keywatcher.checkSpecialStr(".")){P.data.group.count=0}if(P.data.group.count>1){P.data.setGroup(0,0)}else{var AD=AC.id;var AF=AD.substr(AD.length-1,1);P.data.sendGroupLog(P.data.db.curpage,AF)}P.inputsource="";r(P.inputselected,true);P.inputselected=""}}function U(AA){var z=Q("bdime_selector_"+AA);if(z){x(z)}}function e(AA){if(AA=="pre"){P.curSelectNum--;if(P.data.db.curpage==1){if(P.curSelectNum==0){P.curSelectNum=1}}else{if(P.curSelectNum==0){P.curSelectNum=P.shownum;X()}}}else{if(AA=="nxt"){P.curSelectNum++;if(P.data.db.curpage==P.data.db.totalpage){var z=P.data.db.totalnum-(P.data.db.curpage-1)*P.shownum;if(P.curSelectNum>z){P.curSelectNum=z}}else{if(P.curSelectNum>P.shownum){P.curSelectNum=1;n()}}}}p();Q("bdime_selector_"+P.curSelectNum).className="bdime_selected"}function o(z){if(z){x(z)}}function j(){var z=Q("bdime_selector_"+P.curSelectNum);if(z){x(z)}}function Z(){var z=f(P.panel_input.innerHTML);if(z!=""){P.data.group.en.push(z);P.data.group.ch.push(z);P.data.group.count=0;P.data.sendGroupLog(0,0);r(z,true)}}function y(AB){P.pageTimes=0;P.isSubAddr=false;var z=false;var AD=P.inputsource;if(!/\'$/.test(AD)){P.selectLock=true}var AC=Q("bdime_cursor");var AE=AC.previousSibling;var AA=AC.nextSibling;if(AB=="left"){if(AE){if(AE.innerHTML=="'"||AE.className=="bdime_ch"){z=true;P.selectLock=false}P.panel_input.removeChild(AE)}else{return }}else{if(AB=="right"){if(AA){if(AA.innerHTML=="'"||AA.className=="bdime_ch"){z=true;P.selectLock=false}P.panel_input.removeChild(AA)}else{return }}}AE=null;AA=null;d();P.needIptBack=false;if(P.inputsource==""){if(P.inputselected==""){r("",true);P.inputpanel.hide()}else{z=true;P.selectLock=false;P.data.setSpecialData()}}if(!(z||/\'$/.test(AD))){P.data.restData()}}function v(AH,AG){P.pageTimes=0;P.isSubAddr=false;var AB=Q("bdime_cursor");var AF=AB.previousSibling;var AA=AB.nextSibling;if(AA&&AA.className=="bdime_ch"){return }if(AH!="'"){P.selectLock=true}else{if(AA&&AA.className=="bdime_en"){return }}var z=f(P.panel_input.innerHTML);if(z.length>=80){P.selectLock=false;return }if(AG){var AD=Q("bdime_selector_"+P.curSelectNum);if(AD){AH=P.inputselected+t(f(AD.innerHTML))+AH}r(AH,true)}else{if(P.status.on&&!P.inputpanel.isShow){P.inputpanel.show()}for(var AE=0;AE<AH.length;AE++){var AC=B("span");AC.innerHTML=AH.substr(AE,1);AC.className="bdime_en";P.panel_input.insertBefore(AC,AB);AC=null}d();P.needIptBack=false;if(AH!="'"){P.data.restData()}}}function d(){var AC="",z="";var AB=P.panel_input.getElementsByTagName("span");for(var AA=0;AA<AB.length;AA++){var AD=AB[AA];if(AD.className=="bdime_ch"){AC+=AD.innerHTML}else{if(AD.className=="bdime_en"){z+=AD.innerHTML}}}P.inputselected=AC;P.inputsource=z}function C(AA){var AC=Q("bdime_cursor");switch(AA){case"left":var AD=AC.previousSibling;if(AD){P.panel_input.insertBefore(AC,AD)}AD=null;break;case"right":var z=AC.nextSibling;if(z){P.panel_input.insertBefore(z,AC)}z=null;break;case"home":var AD=AC.previousSibling;var AB=P.panel_input.childNodes[0];if(AD&&AB){P.panel_input.insertBefore(AC,AB)}AD=null;break;case"end":var z=AC.nextSibling;if(z){P.panel_input.appendChild(AC)}z=null;break}}function l(){J(P.tools_close,"click",function(){a(1);R(0,0,0,0,0)});J(P.tools_off_logo,"click",function(){s(1);R(0,1,0,0,0)});J(P.tools_ch,"click",u);J(P.tools_bc,"click",k);J(P.tools_pt,"click",G);J(document,"mousedown",function(AC){var AC=AC||window.event;var AB=AC.target||AC.srcElement;if(AB&&AB.className=="bdime_link"){setTimeout(function(){F(P.bdime_menu)},500)}else{F(P.bdime_menu)}if(AB!=P.iptCurTarget){P.runner.end()}});var z=P.tools;J(z,"mousedown",function(){setTimeout(function(){r("",false)},10)});J(z,"mouseover",function(){P.isBlur=false});J(z,"mouseout",function(){P.isBlur=true});var AA=P.panel;J(AA,"mousedown",function(){setTimeout(function(){r("",false)},10)});J(AA,"mouseover",function(){P.isBlur=false});J(AA,"mouseout",function(){P.isBlur=true});J(window,"resize",function(){P.inputpanel.setPosition();P.toolbar.setPosition()});if(P.status.on){s(0)}else{a(0)}}return{init:l,modeCH:u,modeBC:k,modePT:G,inputLetter:v,setPagePre:X,setPageNxt:n,autoPagePre:g,autoPageNxt:V,stopAutoPage:m,setInput:w,arrSelResult:e,numSelResult:U,clkSelResult:o,spaSelResult:j,delLetter:y,enterInput:Z,toolsOff:a,openIme:i,closeIme:c,disableTargetIme:T,moveCursor:C}})();P.drag=(function(){var T=null;var V=null;var U=null;function W(f,d){var d=d||window.event;var c=S(f);var a=X(d);return{x:a.x-c.x,y:a.y-c.y}}function X(d){var a=document.documentElement,c=document.body;return{x:d.pageX||(d.clientX+a.scrollLeft||c.scrollLeft),y:d.pageY||(d.clientY+a.scrollTop||c.scrollTop)}}function Y(f){if(!T){return false}var f=f||window.event;var m=X(f);var a=m.x-U.x;var j=m.y-U.y;var n=document.documentElement,o=document.body;var g=n.scrollLeft||o.scrollLeft;var l=n.scrollTop||o.scrollTop;var l=n.scrollTop||o.scrollTop;var c=n.clientWidth;var h=n.clientHeight;var i=T.offsetWidth;var d=T.offsetHeight;if(T==P.tools){i=V==P.tools_off_drag?38:140;if(a<i){a=i}if(a>g+c-50){a=g+c-50}if(P.isIE==6){if(j<l){j=l}else{if(j>l+h-d-8){j=l+h-d-8}}}else{a-=g;j-=l;if(j<0){j=0}if(j>h-d-8){j=h-d-8}}}if(T==P.panel){var k=m.x;if(k<5||k>c-5){return }if(j<l){j=l}else{if(j>l+h-d){j=l+h-d}}}T.style.left=a+"px";T.style.top=j+"px"}function Z(){J(P.tools_drag,"mousedown",function(a){T=P.tools;V=P.tools_drag;C(a)});J(P.tools_off_drag,"mousedown",function(a){T=P.tools;V=P.tools_off_drag;C(a)});J(P.panel,"mousedown",function(a){T=P.panel;V=P.panel;C(a)});J(document,"mouseup",G)}function C(a){J(document,"mousemove",Y);document.onselectstart=function(c){return false};if(P.isFirefox){document.body.style.MozUserSelect="none"}if(T.setCapture){T.setCapture()}U=W(T,a)}function G(){E(document,"mousemove",Y);document.onselectstart=null;if(P.isFirefox){document.body.style.MozUserSelect=""}if(!T){return false}if(T.releaseCapture){T.releaseCapture()}T=null}return{init:Z}})();P.inputwatcher=(function(){var Y=false;var V="";var U="";var X=null;var G=null;function W(){U=P.inputsource.replace(/\'/g,"");if(V!=U){V=U;P.xpc.send()}}function C(){if(!Y){G=setInterval(W,10);Y=true}}function Z(){if(Y){clearInterval(G);Y=false}}return{on:C,off:Z}})();P.keywatcher=(function(){var f=false;var l=false;var Z=false;var U=false;var c=false;var V=false;var C=true;var W=true;var h=false;var o=false;var i=false;function n(s){var s=s||window.event;var r=s.which?s.which:s.keyCode;Z=s.shiftKey||(r==16);U=s.ctrlKey||(r==17);c=s.altKey||(r==18);V=s.metaKey||(r==91);h=r==16;if(U||c||V){return }f=false;if(r>=65&&r<=90){f=true}l=false;if(P.isFirefox){r=m(r)}if(P.isOpera){r=T(r);i=false}if((r>=65&&r<=90)||(r>=48&&r<=57)||(r>=96&&r<=105)||r==192||r==189||r==187||r==219||r==221||r==220||r==186||r==222||r==188||r==190||r==191||r==109||r==107||r==110||r==111||r==106||r==59||r==32){l=true}var u="";var t=false;if(l){if(!f){d(s);if(r>=48&&r<=57){if(P.inputpanel.isShow){if(Z){u=P.status.pt?D[r][5]:D[r][3];t=true}else{if(P.keywatcher.checkAddr()){u=D[r][0]}else{P.control.numSelResult(String.fromCharCode(r));return false}}}else{if(Z){var q=P.status.pt?5:3;if(P.status.ch){u=D[r][q]}else{u=P.status.bc?D[r][q]:D[r][4]}}else{u=P.status.bc?D[r][0]:D[r][2]}t=true}}if(r>=96&&r<=105){u=P.status.bc?D[r][0]:D[r][2];t=true}switch(r){case 32:if(Z){return }if(P.inputpanel.isShow){P.control.spaSelResult();return false}else{var q=P.status.pt?2:0;u=P.status.bc?D[r][q]:D[r][1];t=true}break;case 187:if(Z){var q=P.status.pt?5:3;if(P.status.ch){u=D[r][q]}else{u=P.status.bc?D[r][q]:D[r][4]}t=true}else{if(P.inputpanel.isShow){P.control.stopAutoPage();P.control.setPageNxt();return false}else{var q=P.status.pt?2:0;if(P.status.ch){u=D[r][q]}else{u=P.status.bc?D[r][q]:D[r][1]}t=true}}break;case 190:if(Z){var q=P.status.pt?5:3;if(P.status.ch){u=D[r][q]}else{u=P.status.bc?D[r][q]:D[r][4]}t=true}else{if(P.inputpanel.isShow){if(g(".")){u=D[r][0]}else{P.isSubAddr=P.pageTimes>0?false:true;P.pageTimes++;P.control.stopAutoPage();P.control.setPageNxt();return false}}else{var q=P.status.pt?2:0;if(P.status.ch){u=D[r][q]}else{u=P.status.bc?D[r][q]:D[r][1]}t=true}}break;case 189:case 188:if(Z){var q=P.status.pt?5:3;if(P.status.ch){u=D[r][q]}else{u=P.status.bc?D[r][q]:D[r][4]}t=true}else{if(P.inputpanel.isShow){if(r==189&&g("-")){u=D[r][0]}else{P.control.stopAutoPage();P.control.setPagePre();return false}}else{var q=P.status.pt?2:0;if(P.status.ch){u=D[r][q]}else{u=P.status.bc?D[r][q]:D[r][1]}t=true}}break;case 106:case 107:case 109:case 110:case 111:u=P.status.bc?D[r][0]:D[r][1];t=true;break;case 186:case 191:case 192:case 219:case 220:case 221:if(Z){if(r==186&&g(":")){u=D[r][3];break}var q=P.status.pt?5:3;if(P.status.ch){u=D[r][q]}else{u=P.status.bc?D[r][q]:D[r][4]}}else{if(r==191&&g("/")){u=D[r][0];break}var q=P.status.pt?2:0;if(P.status.ch){u=D[r][q]}else{u=P.status.bc?D[r][q]:D[r][1]}}t=true;break;case 222:if(Z){var q=W?6:7;u=P.status.pt?D[r][q]:(P.status.bc?D[r][4]:D[r][5]);if(P.status.pt){W=W?false:true}t=true}else{if(P.inputpanel.isShow){u=D[r][0]}else{var q=C?2:3;u=P.status.pt?D[r][q]:(P.status.bc?D[r][0]:D[r][1]);if(P.status.pt){C=C?false:true}t=true}}break}P.control.inputLetter(u,t)}}else{if(P.inputpanel.isShow){if(r==8){if(!P.isOpera){d(s);P.control.delLetter("left")}}if(r==13){if(P.inputpanel.isShow){o=true}d(s);P.control.enterInput()}if(r==27){d(s);P.inputpanel.hide()}if(r==33){d(s);P.control.stopAutoPage();P.control.setPagePre()}if(r==34){d(s);P.control.stopAutoPage();P.control.setPageNxt()}if(r==38){if(!P.isOpera){d(s);P.control.arrSelResult("pre")}}if(r==40){if(!P.isOpera){d(s);P.control.arrSelResult("nxt")}}if(r==37){if(!P.isOpera){d(s);P.control.moveCursor("left")}}if(r==39){if(!P.isOpera){d(s);P.control.moveCursor("right")}}if(r==36){d(s);P.control.moveCursor("home")}if(r==35){d(s);P.control.moveCursor("end")}if(r==46){if(P.isOpera){i=true}else{d(s);P.control.delLetter("right")}}}}}function g(s){var q=false;var r=P.inputsource;if(P.inputpanel.isShow){switch(s){case"-":case".":q=/^(((https?|ftp)\:\/{2}[a-z0-9])|w{3})|\./i.test(r);break;case":":q=/^(https?|ftp)(?!\:)/i.test(r);break;case"/":q=/^(https?|ftp)\:\/?/i.test(r);break}}return q}function k(){return/(((https?|ftp)\:)|w{3}\.|\.)/i.test(P.inputsource)}function j(r){var r=r||window.event;var q=r.which?r.which:r.keyCode;if(Z&&q==32){P.control.modeBC();h=false}if(h&&q==16&&!(r.ctrlKey||r.altKey)){P.control.modeCH()}if((U&&Z)||(c&&Z)||(U&&q==32)){P.control.toolsOff(1);R(0,0,0,0,0)}if(U&&q==190){P.control.modePT()}}function X(r){var r=r||window.event;var q=r.which?r.which:r.keyCode;var t="";var s=false;if(f&&!(U||c||V)){if((q>=97&&q<=122)){if(P.status.ch){t=D[q-32][0];if(P.isSubAddr&&P.inputsource!=""){if(!/\'$/.test(P.inputsource)){t="."+t}P.isSubAddr=false}}else{t=P.status.bc?D[q-32][0]:D[q-32][1];s=true}}else{t=P.status.bc?D[q][3]:D[q][4];s=true}d(r);P.control.inputLetter(t,s)}if(P.isOpera){if(l&&!f){d(r)}if(o&&q==13){o=false;d(r)}if(P.inputpanel.isShow){if(q==8){d(r);P.control.delLetter("left")}if(q==38){d(r);P.control.arrSelResult("pre")}if(q==40){d(r);P.control.arrSelResult("nxt")}if(q==37){d(r);P.control.moveCursor("left")}if(q==39){d(r);P.control.moveCursor("right")}if(q==46&&i){d(r);P.control.delLetter("right")}}}}function m(r){var q=r;if(r==59){q=186}else{if(r==107){q=187}else{if(r==109){q=189}}}return q}function T(r){var q=r;if(r==42){q=106}else{if(r==43){q=107}else{if(r==45){q=109}else{if(r==59){q=186}else{if(r==61){q=187}else{if(r==109){q=189}}}}}}return q}function d(q){P.isIE?q.returnValue=false:q.preventDefault()}function Y(q){E(q,"keydown",n);E(q,"keyup",j);E(q,"keypress",X)}function e(q){J(q,"keydown",P.keywatcher.keydownhandler);J(q,"keyup",P.keywatcher.keyuphandler);J(q,"keypress",P.keywatcher.keypresshandler)}function G(q){if(q.contentDocument&&!P.isIE){q=q.contentWindow}else{if(q.contentWindow.document){q=q.contentWindow.document}}return q}function a(){p();var q=P.iptCurTarget;if(q){if(q.tp=="iframe"){q=G(q)}e(q)}}function p(){var q=P.iptCurTarget;if(q){if(q.tp=="iframe"){q=G(q)}Y(q)}}return{on:a,off:p,keydownhandler:n,keypresshandler:X,keyuphandler:j,addKeyEvent:e,rmKeyEvent:Y,checkAddr:k,checkSpecialStr:g}})();P.data=(function(){var G="http://olime.baidu.com/py";var c="http://olime.baidu.com/userlog";var W={py:"",rn:0,pn:(4*P.shownum)};var i={totalnum:0,totalpage:1,curpage:1,data:[],enableGetData:true,inputback:""};var Y={count:0,en:[],ch:[]};var f=[];var T=[];function j(){Y.count=0;Y.en=[];Y.ch=[]}function d(r,m){var l=P.data.group.en.join("");l=l.replace(/\'/g,"");var k=P.data.group.ch.join("");var p=l.length;var o=[l,k,p];var s=f.length;var q=false;if(s>=20){f.shift()}if(s==0){f.push(o)}else{for(var n=0;n<f.length;n++){if(f[n][0]==o[0]){f[n][1]=o[1];q=true;break}}if(!q){f.push(o)}}Z(r,m)}function Z(r,o){var l=P.data.group.en.join(",");l=l.replace(/\'/g,"");var k=P.data.group.ch;var q=P.data.group.count;var n="bdime_group_log";var p="";if(P.iptCurTarget.tp=="input"){p=P.iptCurTarget.value}if(Q(n)){document.body.removeChild(Q(n))}var m=c+"?py="+encodeURIComponent(l)+"&res="+encodeURIComponent(k)+"&context="+encodeURIComponent(p)+"&n="+q+"&pg="+r+"&no="+o+"&prd="+document.domain+"&t="+(new Date()).getTime();var t=B("SCRIPT");t.setAttribute("id",n);t.src=m;document.body.appendChild(t)}function e(k){if(k==""){return""}for(var l=0;l<f.length;l++){if(f[l][0]==k){return[f[l][1],f[l][2]]}}}function V(n){var k=[];for(var m in n){k.push(m+"="+encodeURIComponent(n[m]))}var l=G+"?"+k.join("&");if(P.usr){l+="&usr="+encodeURIComponent(P.usr)}return l+"&t="+(new Date()).getTime()}function U(p){if(!p){return false}if(!p[0]){p[0]=[];p[1]=""}if(p[0].length==0){i.enableGetData=false;if(i.totalnum==0){p[0].push([P.inputsource,P.inputsource.length]);p[1]=P.inputsource}}if(P.keywatcher.checkAddr()){p[0].length=1}var o=P.inputsource;var m=p[1];o=o.replace(/\'/g,"");m=m.replace(/\'/g,"");if(m!=o){return }if(!i.data[0]){T=[];p[0]=g(p[0]);var q=e(o);if(q){var l=p[0];if(!l){l.unshift(q)}else{var r=-1;for(var k=0;k<l.length;k++){if(l[k][0]==q[0]){r=k;break}}if(r>=0){l.splice(k,1)}l.unshift(q)}p[0]=l}}i.totalnum+=p[0].length;i.totalpage=Math.ceil(i.totalnum/P.shownum);i.data=i.data.concat(p[0]);i.inputback=p[1];P.inputpanel.setResults()}function h(){i.curpage=1;i.totalnum=1;i.totalpage=1;i.data=[[P.inputselected,0],""];P.inputpanel.setResults()}function g(k){for(var l=0;l<k.length;l++){if(!C(k[l])){T.push(k[l])}}return T}function C(l){for(var k=0;k<T.length;k++){if(T[k][0]==l[0]){return true}}return false}function X(){W.rn=0;i.totalnum=0;i.totalpage=1;i.curpage=1;i.data=[];i.enableGetData=true;P.curSelectNum=1}function a(){var k=P.inputsource.replace(/\'/g,"");if(P.tempsource==k){return }else{P.tempsource=k}var l=P.inputsource;l=l.replace(/(\')+/g,"$1");if(P.inputselected!=""){l=l.replace(/\'/g,"")}l=l.replace(/\'$/g,"");W.py=l;if(W.py!=""){return V(W)}else{return""}}return{getData:a,setData:U,restData:X,setSpecialData:h,db:i,param:W,group:Y,setGroup:d,resetGroup:j,sendGroupLog:Z}})();var I=A.create();I.prototype={initialize:function(){this.url="http://olime.baidu.com/xpc.html";this.guid="bdime_py";this.domain=this.getDomain();this.initOpener();this.initFrame()},getDomain:function(){var C=B("A");C.href=this.url;var G=C.protocol.replace(":","")+"://"+C.hostname.replace(/\:\d+/,"")+(C.port==""||C.port==0||(parseInt(C.port)==80)?"":":"+C.port);return G},initOpener:function(){var C=this;this.opener={XPC:{parentReceiveHandler:function(G){C.onMessage(G)}}}},initFrame:function(){if(document.body){this.win=this.createIframe(this.url,this,this.init);window.frames[this.guid].opener=this.opener}else{var C=this;J(window,"load",function(){C.win=C.createIframe(C.url,C,C.init);window.frames[C.guid].opener=C.opener})}},createIframe:function(C,T,G){ifr=B("IFRAME");ifr.src=C+"?prd="+document.domain;ifr.id=T.guid;ifr.name=T.guid;ifr.style.display="none";document.body.appendChild(ifr);J(ifr,"load",function(){G.call(T)});return ifr.contentWindow},init:function(G){var C=this;if(window.postMessage){J(window,"message",function(T){C.onMessage(T)})}C.ready()},ready:function(){var C="bdime_xpc_loaded";this.send(C)},send:function(T){var C=T?T:P.data.getData();if(!C){return }if(window.postMessage){this.win.postMessage(C,this.domain)}else{var G={data:C,origin:this.domain};if(this.opener.XPC.childReceiveHandler){this.opener.XPC.childReceiveHandler(G)}}},onMessage:function(G){G=G||window.event;if(G.origin==this.domain){var C=G.data;if(G.data=="bdime_xpc_loaded"){P.runner.begin()}else{var T=(new Function("return "+G.data))();P.data.setData(T)}}}};P.runner=(function(){var Y=null;function Z(i){if(P.isClose){return }var i=i||window.event;var h=i.target||i.srcElement;if(typeof (h.tagName)=="undefined"){P.iptCurTarget=h.frameElement}else{P.iptCurTarget=h}if(P.isIE&&h.tp=="iframe"){h=h.contentWindow.document}if(P.status.on){P.keywatcher.rmKeyEvent(h);P.keywatcher.addKeyEvent(h)}P.toolbar.show()}function a(i){if(P.isClose){return }var i=i||window.event;var h=i.target||i.srcElement;if(P.isIE&&h.tp=="iframe"){h=h.contentWindow.document}P.keywatcher.rmKeyEvent(h);P.toolbar.hide()}function X(j){if(P.inputs.length>0){var h=P.inputs;for(var k=0;k<h.length;k++){var l;if(typeof h[k]=="string"){l=Q(h[k])}else{if(typeof h[k]=="object"){l=h[k]}else{break}}if(l&&l.tagName&&l.tagName.toLowerCase()=="input"&&l.type=="text"&&g(l)){C(l,"input")}else{if(l&&l.tagName&&l.tagName.toLowerCase()=="textarea"&&g(l)){C(l,"textarea")}else{if(l&&l.tagName&&l.tagName.toLowerCase()=="div"&&l.contentEditable.toString()=="true"&&typeof (l.ex)=="undefined"){C(l,"div")}else{if(l&&l.tagName&&l.tagName.toLowerCase()=="iframe"&&typeof (l.ex)=="undefined"){setTimeout(function(){try{var n,m;if(l.contentDocument&&!P.isIE){n=l.contentDocument;m=l.contentWindow}else{if(l.contentWindow.document){n=l.contentWindow.document;m=l}}if(n){if(n.designMode.toLowerCase()=="on"||n.body.contentEditable.toString()=="true"){P.iptTargets.push(l);l.tp="iframe";l.ex=true;J(m,"focus",Z);J(m,"blur",a)}}}catch(i){}},10)}}}}}}else{T(j);if(P.isIE){J(j,"activate",function(){T(j)})}else{J(j,"DOMNodeInserted",function(){T(j)})}}}function C(i,h){P.iptTargets.push(i);i.tp=h;i.ex=true;if(P.status.on){P.control.disableTargetIme(i,false)}J(i,"focus",Z);J(i,"blur",a)}function T(h){if(P.isClose){return }Y=setTimeout(function(){if(!P.inputpanel.isShow){W(h);U(h);setTimeout(function(){f(h)},200);d(h)}},20)}function g(h){if(typeof (h.ex)=="undefined"&&O(h,"ime-mode")!="disabled"&&!h.readOnly&&!h.disabled){return true}return false}function W(j){var h=j.getElementsByTagName("input");for(var k=0;k<h.length;k++){var l=h[k];if(l.type=="text"&&g(l)){C(l,"input")}}}function U(j){var h=j.getElementsByTagName("textarea");for(var k=0;k<h.length;k++){var l=h[k];if(g(l)){C(l,"textarea")}}}function f(j){var h=j.getElementsByTagName("iframe");for(var k=0;k<h.length;k++){var m=h[k];if(m.id=="bdime_py"||(typeof (m.ex)!="undefined")){continue}try{var p,n;if(m.contentDocument&&!P.isIE){p=m.contentDocument;n=m.contentWindow}else{if(m.contentWindow.document){p=m.contentWindow.document;n=m}}if(p){if(p.designMode.toLowerCase()=="on"||p.body.contentEditable.toString()=="true"){P.iptTargets.push(m);m.tp="iframe";m.ex=true;J(n,"focus",Z);J(n,"blur",a)}else{X(p)}}}catch(l){}}}function d(j){var h=j.getElementsByTagName("div");for(var k=0;k<h.length;k++){var l=h[k];if(l.id=="bdime_py"||(typeof (l.ex)!="undefined")){continue}if(l.contentEditable.toString()=="true"){P.iptTargets.push(l);l.tp="div";l.ex=true;J(l,"focus",Z);J(l,"blur",a)}}}function c(){if(P.isClose){return }var k=document.activeElement;if(P.toolbar.isShow){return }if(k&&k.tagName){var h=k.tagName.toLowerCase();if((h=="input"&&k.type=="text"||h=="textarea")&&!k.readOnly&&!k.disabled&&typeof (k.ex)!="undefined"){P.iptCurTarget=k;if(P.status.on){P.keywatcher.rmKeyEvent(k);P.keywatcher.addKeyEvent(k)}P.toolbar.show()}else{if(h=="iframe"){var j,i;if(k.contentDocument&&!P.isIE){j=k.contentDocument;i=k.contentWindow}else{if(k.contentWindow.document){j=k.contentWindow.document;i=j}}if(j&&(j.designMode.toLowerCase()=="on"||j.body.contentEditable.toString()=="true")){P.iptCurTarget=k;if(P.status.on){P.keywatcher.addKeyEvent(i)}P.toolbar.show()}}}}}function G(){X(document);P.build.init();P.toolbar.init();P.drag.init();P.control.init();setInterval(c,50);var h=(new Date()).getTime();R(h-M,P.status.on,P.status.ch,P.status.bc,P.status.pt)}function V(i){if(i){var i=i||window.event;var h=i.target||i.srcElement;if(h==P.iptCurTarget){return false}}if(P.isBlur){setTimeout(function(){P.inputpanel.hide()},50)}}function e(){if(typeof bdime_option=="object"){var k=bdime_option;var i=k.on,j=k.ch,n=k.bc,m=k.pt,l=k.domain,o=k.username,h=k.targets;if(i===true||i===false){P.status.on=i===true?1:0}if(j===true||j===false){P.status.ch=j===true?1:0}if(n===true||n===false){P.status.bc=n===true?1:0}if(m===true||m===false){P.status.pt=m===true?1:0}if(l){P.domain=l}if(o){P.usr=o}if(typeof h=="object"){P.inputs=h}}P.xpc=new I();J(window,"unload",function(){for(var p in P){delete P[p]}window.bdime=null})}return{init:e,begin:G,end:V}})();P.runner.init();window.bdime=P;P.open=P.control.openIme;P.close=P.control.closeIme})();